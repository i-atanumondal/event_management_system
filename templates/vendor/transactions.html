<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Transactions</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>Vendor Transactions</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>User ID</th>
                    <th>Product ID</th>
                    <th>Status</th>
                    <th>Update Status</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                    <tr>
                        <td>{{ order.order_id }}</td>
                        <td>{{ order.user_id }}</td>
                        <td>{{ order.product_id }}</td>
                        <td>
                            <select id="status-{{ order.order_id }}" class="form-control">
                                <option value="ready" {% if order.status == 'ready' %}selected{% endif %}>Ready</option>
                                <option value="out-for-delivery" {% if order.status == 'out-for-delivery' %}selected{% endif %}>Out for Delivery</option>
                                <option value="shipping" {% if order.status == 'shipping' %}selected{% endif %}>Shipping</option>
                            </select>
                        </td>
                        <td>
                            <button onclick="updateStatus({{ order.order_id }})" class="btn btn-primary">Update</button>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        function updateStatus(orderId) {
            const statusSelect = document.getElementById(`status-${orderId}`);
            const selectedStatus = statusSelect.value;
            fetch(`/vendor/update-status/${orderId}`, {
                method: 'POST',
                body: JSON.stringify({ status: selectedStatus }),
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (response.status === 200) {
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>
